---
import Layout from '@/layouts/Layout.astro';
import ModelCard from '@/components/ModelCard.astro';
import keywordPagesData from '@/data/keyword_pages.json';
import allModels from '@/data/models.json';

export function getStaticPaths() {
  return Object.keys(keywordPagesData).map(slug => ({
    params: { slug },
  }));
}

const { slug } = Astro.params;
const pageData = keywordPagesData[slug];

if (!pageData) {
  return new Response(null, { status: 404 });
}

const modelsForPage = pageData.model_ids.map(id => allModels.find(m => m.id === id)).filter(Boolean);
---

<Layout title={pageData.title} description={pageData.description}>
  <div class="container mx-auto px-4 py-8">
    <div class="mb-12 text-center">
      <h1 class="text-4xl font-bold mb-2">{pageData.title}</h1>
      <p class="text-lg text-gray-600 dark:text-gray-400 max-w-3xl mx-auto">{pageData.description}</p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
      {modelsForPage.map(model => <ModelCard model={model} isRisingStar={model.is_rising_star} />)}
    </div>
  </div>
</Layout>
---
// src/components/explore/ExploreSidebar.astro
import SearchFilters from '../SearchFilters.astro';

// Get current type from URL
const currentType = Astro.url.searchParams.get('type') || 'model';
---

<aside class="w-full lg:w-64 flex-shrink-0 space-y-6">
  <!-- Search -->
  <div>
    <label for="explore-search" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Search</label>
    <div class="relative">
      <input 
        type="text" 
        id="explore-search"
        placeholder="Search by name, tag..." 
        class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"
      />
      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
        <svg class="h-5 w-5 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
        </svg>
      </div>
    </div>
  </div>

  <!-- V6.2: Entity Type Filter -->
  <div>
    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Entity Type</label>
    <div class="flex flex-wrap gap-2" id="entity-type-filter">
      <a 
        href="/ranking?type=model" 
        class:list={["px-3 py-1.5 rounded-lg text-sm font-medium transition-all", currentType === 'model' ? 'bg-indigo-600 text-white' : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700']}
      >
        ğŸ¤– Models
      </a>
      <a 
        href="/ranking?type=space" 
        class:list={["px-3 py-1.5 rounded-lg text-sm font-medium transition-all", currentType === 'space' ? 'bg-purple-600 text-white' : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700']}
      >
        ğŸ® Spaces
      </a>
      <a 
        href="/ranking?type=dataset" 
        class:list={["px-3 py-1.5 rounded-lg text-sm font-medium transition-all", currentType === 'dataset' ? 'bg-emerald-600 text-white' : 'bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700']}
      >
        ğŸ“Š Datasets
      </a>
    </div>
  </div>

  <!-- Sort -->
  <div>
    <label for="explore-sort" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Sort By</label>
    <select id="explore-sort" class="w-full border-gray-300 rounded-lg shadow-sm focus:border-indigo-500 focus:ring-indigo-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white">
      <option value="trending">ğŸ”¥ Trending</option>
      <option value="fni">ğŸ›¡ï¸ Trust Score (FNI)</option>
      <option value="likes">â¤ï¸ Most Liked</option>
      <option value="downloads">â¬‡ï¸ Downloads</option>
      <option value="recent">new Newest</option>
    </select>
  </div>

  <!-- Main Filters Component -->
  <SearchFilters />
</aside>

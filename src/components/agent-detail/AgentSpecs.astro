---
/**
 * AgentSpecs Component - Phase B P2
 * Displays agent specifications in sidebar format
 * 
 * @component
 */

interface Props {
  framework?: string;
  language?: string;
  license?: string;
  stars?: number;
  forks?: number;
  lastCommit?: string;
  sourceUrl?: string;
}

const { framework, language, license, stars, forks, lastCommit, sourceUrl } = Astro.props;

// Format date
function formatDate(dateStr?: string): string {
  if (!dateStr) return '--';
  try {
    const date = new Date(dateStr);
    return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
  } catch {
    return dateStr;
  }
}

const hasSpecs = framework || language || license || stars || forks || lastCommit;
---

{hasSpecs && (
  <div class="bg-white dark:bg-gray-800 rounded-xl p-5 shadow-sm border border-gray-100 dark:border-gray-700">
    <h3 class="text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wide mb-4">
      Agent Specs
    </h3>
    
    <dl class="space-y-3 text-sm">
      {framework && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">Framework</dt>
          <dd class="text-gray-900 dark:text-white font-medium">{framework}</dd>
        </div>
      )}
      
      {language && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">Language</dt>
          <dd class="text-gray-900 dark:text-white font-medium">{language}</dd>
        </div>
      )}
      
      {license && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">License</dt>
          <dd>
            <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300">
              {license}
            </span>
          </dd>
        </div>
      )}
      
      {stars !== undefined && stars > 0 && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">Stars</dt>
          <dd class="text-yellow-600 dark:text-yellow-400 font-medium">⭐ {stars.toLocaleString()}</dd>
        </div>
      )}
      
      {forks !== undefined && forks > 0 && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">Forks</dt>
          <dd class="text-gray-900 dark:text-white">{forks.toLocaleString()}</dd>
        </div>
      )}
      
      {lastCommit && (
        <div class="flex justify-between">
          <dt class="text-gray-500 dark:text-gray-400">Last Commit</dt>
          <dd class="text-gray-900 dark:text-white">{formatDate(lastCommit)}</dd>
        </div>
      )}
    </dl>
    
    {sourceUrl && (
      <div class="mt-4 pt-4 border-t border-gray-100 dark:border-gray-700">
        <a 
          href={sourceUrl}
          target="_blank"
          rel="noopener noreferrer"
          class="block w-full text-center py-2 px-4 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-sm font-medium"
        >
          View Repository →
        </a>
      </div>
    )}
  </div>
)}

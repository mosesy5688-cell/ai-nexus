---
interface Props {
  space: any;
}

const { space } = Astro.props;
import FullReadmeSection from '../model-detail/FullReadmeSection.astro';
import QuickCommands from '../common/QuickCommands.astro';
import ModelGallery from '../model-detail/ModelGallery.astro';
---

<div class="space-y-8">
  <!-- Section: Demo Preview -->
  <section class="bg-white dark:bg-gray-800 rounded-xl p-6 shadow-sm border border-gray-100 dark:border-gray-700">
     <h2 class="text-xl font-bold mb-4 text-gray-900 dark:text-white flex items-center gap-2">
       <span>ðŸŽ®</span> Demo Preview
     </h2>
     
     <div class="w-full aspect-video bg-gray-100 dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden relative">
         {space.sdk === 'gradio' || space.sdk === 'streamlit' || space.sdk === 'docker' ? (
             <iframe 
                src={`https://hf.space/embed/${space.author}/${space.name}/+`} 
                class="w-full h-full" 
                frameborder="0"
                loading="lazy"
                title="Space Demo"
                sandbox="allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts"
             ></iframe>
         ) : (
             <div class="flex flex-col items-center justify-center h-full p-6 text-center">
                <p class="text-gray-500 mb-4">Preview not available for {space.sdk || 'this SDK'}.</p>
                {space.source_url && (
                    <a href={space.source_url} target="_blank" class="px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition font-medium">
                       Launch External Demo
                    </a>
                )}
             </div>
         )}
         <div class="absolute bottom-0 left-0 right-0 bg-black/80 text-white text-[10px] p-2 text-center border-t border-gray-800">
            Interact with caution. Content generated by third-party code.
         </div>
     </div>
  </section>

  </section>

  {/* V16.2: Universal Enhancements */}
  <ModelGallery content={space.body_content || space.description} title="Space Interface & Visuals" />
  <QuickCommands entity={space} type="space" />

  <!-- Section: README -->
  <FullReadmeSection 
    bodyContent={space.body_content || space.description}
    type="space"
    maxPreviewLength={2000}
  />
</div>
